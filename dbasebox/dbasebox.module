<?php

/**
 * @file
 * Use this module to learn Drupal's database interface.
 */

/**
 * Implements hook_menu().
 */
function dbasebox_menu() {
  $items = array();

  $items['dbasebox'] = array(
    'title' => 'Database Box',
    'page callback' => 'dbasebox_sandbox',
    'access callback' => TRUE,
    'type' => MENU_NORMAL_ITEM,
  );

  return $items;
}

/**
 * Database page callback.
 */
function dbasebox_sandbox() {

  $output = '';

  // Simple query.
  $result = db_query('SELECT title FROM {node}');

  foreach ($result as $row) {
    $output .= $row->title . "<br/>";
    // dpm($row);
  }

  // Simple query with placeholder.
  // SELECT name FROM role WHERE rid = 2
  $result = db_query('SELECT name FROM {role} WHERE rid = :rid',
    array(':rid' => 2));

  $output .= '<br/>';
  foreach ($result as $row) {
    $output .= $row->name . '<br/>';
    // dpm($row);
  }

  // Simple query with placeholders.
  // SELECT name FROM role WHERE rid > 0 AND rid < 3
  $result = db_query('SELECT name FROM {role} WHERE rid > :min_rid AND rid < :max_rid',
    array(':min_rid' => 0, ':max_rid' => 3));

  $output .= '<br/>';
  foreach ($result as $row) {
    $output .= $row->name . '<br/>';
  }

  // return t('@output', array('@output' => $output));
  return $output;
}
